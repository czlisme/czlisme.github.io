(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["List_Sorts"],{"29f2":function(e,t,a){"use strict";a("63dc")},"5bf8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品分类")])],1),a("el-card",{staticClass:"box-card"},[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddSort}},[e._v("添加分类")]),a("el-table",{attrs:{size:"mini",data:e.goodCategories,"highlight-current-row":"",height:"400",border:"",stripe:"",lazy:"","row-key":"cat_id",indent:20,"tree-props":{children:"children",hasChildren:"haschildren"}}},[a("el-table-column",{attrs:{label:"#",type:"index"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0===t.row.cat_level?e.goodCategories.indexOf(t.row)+1:""))])]}}])}),a("el-table-column",{attrs:{label:"分类名称",prop:"cat_name"}}),a("el-table-column",{attrs:{label:"是否有效"},scopedSlots:e._u([{key:"default",fn:function(e){return[!1===e.row.cat_deleted?a("i",{staticClass:"el-icon-success"}):a("i",{staticClass:"el-icon-error"})]}}])}),a("el-table-column",{attrs:{prop:"cat_level",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.cat_level?a("el-tag",{attrs:{effect:"dark"}},[e._v("一级")]):1===t.row.cat_level?a("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("二级")]):a("el-tag",{attrs:{effect:"dark",type:"danger"}},[e._v("三级")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:function(a){return e.showEditDialog(t.row.cat_id)}}},[e._v("编辑")]),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"mini"},on:{click:function(a){return e.deleteCate(t.row.cat_id)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[1,5,10,50],layout:"total, sizes, prev, pager, next, jumper","page-size":5,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"修改分类",visible:e.sortDialogVisible,width:"50%"},on:{"update:visible":function(t){e.sortDialogVisible=t}}},[a("div",[a("el-form",{ref:"cat_data",attrs:{model:e.cat_data,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:e.cat_data.cat_name,callback:function(t){e.$set(e.cat_data,"cat_name",t)},expression:"cat_data.cat_name"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.sortDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editCate}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"",visible:e.addSortdialog,width:"50%"},on:{"update:visible":function(t){e.addSortdialog=t},close:e.resetAddSortDialog}},[a("el-form",{ref:"addCateFormRef",attrs:{model:e.addCateForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"分类名称","label-width":"80",prop:"cat_name"}},[a("el-input",{model:{value:e.addCateForm.cat_name,callback:function(t){e.$set(e.addCateForm,"cat_name",t)},expression:"addCateForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类","label-width":"80"}},[a("el-cascader",{ref:"cascader",attrs:{clearable:"",options:e.parentCateList,props:e.cascaderProps},on:{change:e.parentCateChanged},model:{value:e.selectKeys,callback:function(t){e.selectKeys=t},expression:"selectKeys"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addSortdialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1)],1)},n=[],s=a("1da1"),o=(a("96cf"),a("ee83")),i={data:function(){return{queryInfo:{type:[1,2,3],pagenum:1,pagesize:5},total:0,index:1,currentPage:1,goodCategories:[],addCateForm:{cat_name:"",cat_pid:0,cat_level:0},parentCateList:[],cascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children",checkStrictly:!0},selectKeys:[],sortDialogVisible:!1,addSortdialog:!1,cateId:"",cat_data:{cat_name:"",cat_pid:"",cat_level:""},rules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{max:16,message:"分类名称不能超过16个字符",trigger:"blur"}]}}},created:function(){this.getCategoriesList()},methods:{getCategoriesList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories",{params:e.queryInfo});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取商品分类列表失败"));case 6:e.goodCategories=r.data.result,e.total=r.data.total;case 8:case"end":return t.stop()}}),t)})))()},methodIndex:function(){},showEditDialog:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.sortDialogVisible=!0,a.next=3,t.$http.get("categories/".concat(e));case 3:r=a.sent,n=r.data,t.cat_data=n.data,t.cateId=e;case 7:case"end":return a.stop()}}),a)})))()},editCate:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.cat_data.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.$http.put("categories/".concat(e.cateId),{cat_name:e.cat_data.cat_name});case 4:if(r=t.sent,n=r.data,200!==n.meta.status){t.next=11;break}return t.next=9,e.getCategoriesList();case 9:e.sortDialogVisible=!1,e.$message.success("商品分类名称更新成功");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},deleteCate:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["a"])("你确定永久删除该分类商品吗?","删除商品");case 2:if(a.t0=a.sent,"confirm"===a.t0){a.next=5;break}return a.abrupt("return",t.$message.info("已取消删除权限"));case 5:return a.next=7,t.$http.delete("categories/".concat(e));case 7:r=a.sent,n=r.data,200===n.meta.status&&(t.sortDialogVisible=!1,t.$message.success("商品删除成功"),t.getCategoriesList());case 10:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCategoriesList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCategoriesList()},showAddSort:function(){this.addSortdialog=!0,this.getParentCateList()},getParentCateList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories",{params:{type:2}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取父级商品数据失败"));case 6:e.parentCateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},parentCateChanged:function(){this.selectKeys.length>0?(this.addCateForm.cat_pid=this.selectKeys[this.selectKeys.length-1],this.addCateForm.cat_level=this.selectKeys.length):(this.addCateForm.cat_level=0,this.addCateForm.cat_pid=0)},addCate:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addCateFormRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=a,t.next=!0===t.t0?3:10;break;case 3:return t.next=5,e.$http.post("categories",e.addCateForm);case 5:return r=t.sent,n=r.data,e.addSortdialog=!1,201===n.meta.status&&(e.getCategoriesList(),e.$message.success("添加分类成功")),t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},resetAddSortDialog:function(){this.$refs.addCateFormRef.resetFields(),this.$refs.cascader.$refs.panel.clearCheckedNodes()}}},c=i,l=(a("29f2"),a("2877")),u=Object(l["a"])(c,r,n,!1,null,"be470fa4",null);t["default"]=u.exports},"63dc":function(e,t,a){},9078:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.toAdd}},[e._v("添加商品")])],1)],1),a("el-table",{attrs:{data:e.goodList}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量"}}),a("el-table-column",{attrs:{label:"商品创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFormat")(t.row.add_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"}},[a("span",[e._v("待开发X")])])],1),a("el-pagination",{attrs:{background:"","current-page":e.queryInfo.pagenum,"page-size":e.queryInfo.pagesize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.queryInfo,"pagenum",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"pagenum",t)}}})],1)],1)},n=[],s=a("1da1"),o=(a("96cf"),{data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10},goodList:[],total:0}},methods:{getGoodList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("goods",{params:e.queryInfo});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取商品列表失败"));case 6:e.goodList=r.data.goods,e.total=r.data.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(){},handleCurrentChange:function(){},toAdd:function(){this.$router.push("goods/add"),this.getGoodList()}},created:function(){this.getGoodList()}}),i=o,c=a("2877"),l=Object(c["a"])(i,r,n,!1,null,null,null);t["default"]=l.exports},ee83:function(e,t,a){"use strict";var r=a("1da1"),n=(a("96cf"),a("8bbf")),s=a.n(n),o=new s.a,i=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.$confirm(t,a,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();t["a"]=i}}]);
//# sourceMappingURL=List_Sorts.d8f24e73.js.map